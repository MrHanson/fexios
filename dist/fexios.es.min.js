/**
 * @preserve
 * @mrhanson/fexios v0.0.0-development
 */
function isAbsoluteURL(t){return!!t&&/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function combineURLs(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function buildFullPath(t,e){return t&&!isAbsoluteURL(e)?combineURLs(t,e):e||""}function buildQsPath(t,e){e=e&&Object.entries(e).map(function(t){return t[0]+"="+t[1]}).join("&");return e?t+"?"+e:t}function mergeConfig(e,r){void 0===e&&(e={}),void 0===r&&(r={});var o=Object.create(null);["baseURL","transformRequest","transformResponse","timeout","credentials","validateStatus"].forEach(function(t){void 0!==r[t]?o[t]=r[t]:void 0!==e[t]&&(o[t]=e[t])});return["url","method","headers","params","data"].forEach(function(t){void 0!==r[t]&&(o[t]=r[t])}),o}var InterceptorManager=function(){function t(){this.task=[]}return t.prototype.use=function(t,e){return this.task.push({resolved:t,rejected:e}),this.task.length-1},t.prototype.eject=function(t){this.task[t]&&(this.task[t]=null)},t}();function warn(t){console.warn("%c Fexios warn %c "+t,"background:#f90;padding:1px;border-radius:3px;color:#fff","background:transparent")}function getAbort(t){var e=new AbortController,r=e.signal;return r.addEventListener("abort",function(){return warn("request "+(t||"")+" has been canceled")}),{signal:r,abort:e.abort}}function fetchRequest(i,n){var t=i.url,e=i.method,u=void 0===e?"get":e,r=i.baseURL,e=i.headers,c=void 0===e?{}:e,d=i.params,f=i.data,e=i.timeout,h=void 0===e?5e3:e,e=i.timeoutErrorMessage,l=void 0===e?"request timeout!":e,e=i.credentials,p=void 0===e?"omit":e,m=r?buildFullPath(r,t):t;return new Promise(function(s,a){var r,o,t,e;m?(d&&(m=buildQsPath(m,d)),t=(e=n||getAbort(m)).signal,r=e.abort,e={method:u,headers:c,body:null,credentials:p,signal:t},t=u.toLocaleLowerCase(),["post","put","patch"].includes(t)&&(e.body=f,c["Content-Type"]||(e.headers["Content-Type"]="application/x-www-form-urlencoded")),t=window.fetch(m,e),e=new Promise(function(t,e){o=setTimeout(function(){o&&clearTimeout(o),r(),e(new Error(l))},h)}),Promise.race([t,e]).then(function(t){var e=t.body,r=t.headers,o=t.status,t=t.statusText,n={};r.forEach(function(t,e){return n[e]=t});e={data:e,status:o,statusText:t,headers:n,config:i},t=i.validateStatus;o&&t&&!t(o)?a(new Error("Request failded with status code "+e.status)):s(e)}).catch(function(t){a(t)})):a("parameter requestUrl is missing!")})}function transform(e,t){return t&&(t=!Array.isArray(t)?[t]:t).forEach(function(t){e=t(e)}),e}function dispatchRequest(t){var e=t.transformRequest,r=t.transformResponse;return transform(t,e),fetchRequest(t).then(function(t){return transform(t,r)})}window.fetch||warn("Your browser doesn't fetch, maybe u need the polyfill(https://github.com/github/fetch)"),window.AbortController||warn("Your browser doesn't AbortController");var Fexios=function(){function t(t){this.defaults=t,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}return t.prototype.request=function(t){t=mergeConfig(this.defaults,t);var e=[{resolved:dispatchRequest,rejected:void 0}];this.interceptors.request.task.forEach(function(t){t&&e.unshift(t)}),this.interceptors.response.task.forEach(function(t){t&&e.push(t)});for(var r=Promise.resolve(t);e.length;){var o,n=e.shift();n&&(o=n.resolved,n=n.rejected,r=r.then(o,n))}return r},t.prototype.getUri=function(t){var e=(t=mergeConfig(this.defaults,t)).baseURL,r=t.url,t=t.params;return r?buildQsPath(e?buildFullPath(e,r):r,t):""},t.prototype.get=function(t,e){return this._requestMethodWithoutData("get",t,e)},t.prototype.delete=function(t,e){return this._requestMethodWithoutData("delete",t,e)},t.prototype.head=function(t,e){return this._requestMethodWithoutData("head",t,e)},t.prototype.options=function(t,e){return this._requestMethodWithoutData("options",t,e)},t.prototype.post=function(t,e,r){return this._requestMethodWithData("post",t,e,r)},t.prototype.put=function(t,e,r){return this._requestMethodWithData("post",t,e,r)},t.prototype.patch=function(t,e,r){return this._requestMethodWithData("post",t,e,r)},t.prototype._requestMethodWithoutData=function(t,e,r){return this.request(mergeConfig(r,{method:t,url:e}))},t.prototype._requestMethodWithData=function(t,e,r,o){return this.request(mergeConfig(o,{method:t,data:r,url:e}))},t}(),defaults={timeout:0,headers:{Accept:"application/json, text/plain, */*"},transformRequest:[],transformResponse:[],credentials:"same-origin",validateStatus:function(t){return 200<=t&&t<300}};function createInstance(t){t=new Fexios(t);return Fexios.prototype.request.bind(t)}var fexios=createInstance(defaults);fexios.create=function(t){return createInstance(mergeConfig(defaults,t))},fexios.all=function(t){return Promise.all(t)};export default fexios;
